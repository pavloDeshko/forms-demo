{"version":3,"sources":["formComponents.js","Form.js","App.js","index.js"],"names":["FieldBox","children","gutter","map","ch","span","Check","this","props","value","text","className","onChange","e","target","checked","style","marginLeft","React","PureComponent","Container","activeKey","bordered","Panel","header","paddingLeft","showArrow","key","Options","options","Group","o","display","lineHeight","label","Number","precision","placeholder","marginTop","Decimal","dec","Text","marginBottom","TextArea","maxLength","rows","Form","state","spec","dataArray","fetchSpec","ajax","aja","url","process","formId","on","data","setState","err","go","toChange","pair","newData","Object","assign","prevProps","prevState","off","width","textAlign","f","field","Component","proTypes","types","string","Generic","num","type","propsToPass","nextValue","length","console","dir","Error","Option","responsive","xs","offset","sm","md","lg","App","dic","fetchDic","fetchData","select","showSearch","size","undefined","keys","id","form","ReactDOM","render","document","getElementById"],"mappings":"8bAIO,SAASA,EAAT,GAA8B,IAAXC,EAAU,EAAVA,SACzB,OAAO,uBAAKC,OAAU,CAAC,EAAE,KACvBD,EAASE,KAAI,SAAAC,GAAE,OACf,uBAAKC,KAAM,IACND,OAUD,IAAME,EAAb,iLACU,IAAD,SACcC,KAAKC,MAAnBC,EADA,EACAA,MAAMC,EADN,EACMA,KAEb,OAAO,yBAAKC,UAAU,SAAQ,+BAC5B,uBAAUC,SAFK,SAAAC,GAAC,OAAE,EAAKL,MAAMI,SAASC,EAAEC,OAAOC,UAEjBA,QAASN,IACvC,0BAAMO,MAAO,CAACC,WAAW,SAAUP,SANvC,GAA2BQ,IAAMC,eAiBpBC,EAAb,iLACU,IAAD,EACuBb,KAAKC,MAA5BC,EADA,EACAA,MAAMC,EADN,EACMA,KAAKT,EADX,EACWA,SAClB,OAAO,yBAAKU,UAAU,aAAf,IAA4B,uBAAUU,UAAWZ,EAAM,EAAE,GAAIa,UAAU,GAC5E,sBAAUC,MAAV,CACIC,OAAQ,yBAAKR,MAAO,CAACS,YAAa,QACnC,kBAAC,EAAD,eAAOb,SAAUL,KAAKC,MAAMI,UAAa,CAACH,QAAMC,WAElDgB,WAAW,EACXC,IAAK,GAEN1B,SAXJ,GAA+BiB,IAAMC,eAwBxBS,EAAb,iLACU,IAAD,SACsBrB,KAAKC,MAA3BC,EADA,EACAA,MAAMC,EADN,EACMA,KAAKmB,EADX,EACWA,QAElB,OAAO,yBAAKlB,UAAU,SACpB,6BAAMD,EAAK,KACR,sBAAOoB,MAAP,eAAad,MAAO,CAACS,YAAY,QAASb,SAH9B,SAAAC,GAAC,OAAE,EAAKL,MAAMI,SAASC,EAAEC,OAAOL,SAGqB,CAACA,UACnEoB,EAAQ1B,KAAI,SAAA4B,GAAC,OACZ,uBAAOf,MAAO,CAACgB,QAAQ,QAAQC,WAAW,QAASxB,MAAOsB,EAAEtB,OAAQsB,EAAEG,gBAR7E,GAA6BhB,IAAMC,eAsBtBgB,EAAb,iLACU,IAAD,EACwB5B,KAAKC,MAA5BI,EADD,EACCA,SAASH,EADV,EACUA,MAAMC,EADhB,EACgBA,KACtB,OAAO,yBAAKC,UAAU,SAAQ,+BAC7B,uBAAaC,SAAUA,EAAUH,MAAOA,EAAO2B,UAAW,EAAGC,YAAY,MACzE,0BAAMrB,MAAO,CAACsB,UAAU,MAAOrB,WAAW,SAAUP,SALxD,GAA4BQ,IAAMC,eAgBrBoB,EAAb,iLACU,IAAD,EAC4BhC,KAAKC,MAAhCI,EADD,EACCA,SAASH,EADV,EACUA,MAAMC,EADhB,EACgBA,KAAK8B,EADrB,EACqBA,IAC3B,OAAO,yBAAK7B,UAAU,SAAQ,+BAC1B,uBAAaC,SAAUA,EAAUH,MAAOA,EAAO2B,UAAWI,EAAKH,YAAY,QAC9E,0BAAMrB,MAAO,CAACsB,UAAU,MAAOrB,WAAW,SAAUP,SALxD,GAA6BQ,IAAMC,eAiBtBsB,EAAb,iLACU,IAAD,SACkBlC,KAAKC,MAAnBC,EADJ,EACIA,MAAMC,EADV,EACUA,KAEhB,OAAO,yBAAKC,UAAU,SAAQ,+BAAO,yBAAKK,MAAO,CAAC0B,aAAc,QAAShC,GACvE,sBAAOiC,SAAP,CAAgB/B,SAFD,SAAAC,GAAC,OAAE,EAAKL,MAAMI,SAASC,EAAEC,OAAOL,QAEXA,MAAOA,EAAO4B,YAAY,MAC/DO,UAAW,IAAKC,KAAM,UAN1B,GAA0B3B,IAAMC,eC7GnB2B,EAAb,YACC,WAAYtC,GAAO,IAAD,8BACjB,4CAAMA,KACDuC,MAAQ,CAACC,KAAK,KAAKC,UAAU,IAClC,EAAKC,UAAY,WAAW,IAAD,OACzB3C,KAAK4C,MAAQ5C,KAAK4C,MAAQC,OACxBC,IAAIC,2BAAuC/C,KAAKC,MAAM+C,OAAO,SAC7DC,GAAG,WAAU,SAAAC,GACb,EAAKC,SAAS,CAACT,UAAU,KACzB,EAAKS,SAAS,CAACV,KAAKS,OAEpBD,GAAG,SAAQ,SAAAG,GAAG,OAAE,EAAKT,eACrBU,MAEJ,EAAKC,SAAW,SAAAC,GACf,IAAMC,EAAUC,OAAOC,OAAO,GAAG,EAAKlB,MAAME,UAAUa,GACnD,EAAKJ,SAAS,CAACT,UAAUc,KAfZ,EADnB,iFAoBExD,KAAK2C,cApBP,yCAsBoBgB,EAAUC,GACzB5D,KAAKC,MAAM+C,QAAUW,EAAUX,QAAQhD,KAAK2C,cAvBjD,6CA0BM3C,KAAK4C,OACT5C,KAAK4C,KAAKiB,IAAI,WACd7D,KAAK4C,KAAKiB,IAAI,YA5BhB,+BA+BU,IAAD,OACP,OAAO7D,KAAKwC,MAAMC,KAAO,yBAAKrC,UAAU,OAAOK,MAAO,CAACqD,MAAM,OAAOC,UAAU,SAC5E,kBAACtE,EAAD,KACGO,KAAKwC,MAAMC,KAAK/C,SAASE,KAAI,SAAAoE,GAAC,OAC9B,kBAAC,EAAD,CAAS3D,SAAU,EAAKiD,SAAUW,MAAOD,EAAGtB,UAAW,EAAKF,MAAME,iBAG/D,8HAtCV,GAA0B/B,IAAMuD,WA0ChC3B,EAAK4B,SAAW,CACfnB,OAASoB,IAAMC,QAGT,IAAMC,EAAb,iLACU,IAAD,SAC8BtE,KAAKC,MAAMgE,MAAzCM,EADA,EACAA,IAAIC,EADJ,EACIA,KAAKvC,EADT,EACSA,IAAIiB,EADb,EACaA,KAAKxD,EADlB,EACkBA,SAEnB+E,EAAc,CACnBpE,SAAW,SAAAqE,GAAS,OAAE,EAAKzE,MAAMI,SAAX,eAAsBkE,EAAKG,KACjDxE,MAAQF,KAAKC,MAAMyC,UAAU6B,GAC7BpE,KAAO+C,GAGR,GAAW,KAARsB,GAAe9E,EAASiF,OAAO,EACjC,OAAO,kBAAC,EAAcF,EACpB,kBAAChF,EAAD,KACAC,EAASE,KAAI,SAAAoE,GAAC,OACb,kBAACM,EAAD,CAASjE,SAAU,EAAKJ,MAAMI,SAAU4D,MAAOD,EAAGtB,UAAW,EAAKzC,MAAMyC,iBAItE,GAAW,KAAR8B,EACR,OAAO,kBAAC,EAAUC,GACb,GAAW,KAARD,GAAe9E,EAASiF,OAAO,EACvC,OAAO,kBAAC,EAAD,iBAAaF,EAAb,CAA0BnD,QAChC5B,EAASE,KAAI,SAAAoE,GAAC,MAAG,CAACrC,MAAMqC,EAAEd,KAAKhD,MAAM8D,EAAEO,WAEnC,GAAW,KAARC,GAAevC,GAAe,KAARuC,EAC9B,OAAO,kBAAC,EAAD,iBAAaC,EAAb,CAA0BxC,IAAKA,GAAO,MACxC,GAAW,KAARuC,EACR,OAAO,kBAAC,EAAWC,GACd,GAAW,KAARD,EACR,OAAO,kBAAC,EAASC,GAIjB,MADAG,QAAQC,IAAI7E,KAAKC,MAAMgE,OACjB,IAAIa,MAAM,6CAjCnB,GAA6BnE,IAAMuD,WC5C5Ba,G,WAAAA,QAEDC,EAAa,CAClBC,GAAI,CAACnF,KAAM,GAAIoF,OAAQ,GACvBC,GAAI,CAACrF,KAAM,GAAIoF,OAAQ,GACvBE,GAAI,CAACtF,KAAM,GAAIoF,OAAQ,GACvBG,GAAI,CAACvF,KAAM,GAAIoF,OAAQ,IAmDTI,E,YA/Cb,WAAYrF,GAAO,IAAD,8BACnB,4CAAMA,KACDuC,MAAQ,CAAC+C,IAAI,GAAGvC,OAAO,IAC5B,EAAKwC,SAAW,WAAW,IAAD,OACvBxF,KAAK4C,KAAOC,MACVC,IAAIC,oCACJE,GAAG,WAAU,SAAAC,GACb,EAAKC,SAAS,CAACoC,IAAIrC,OAEnBD,GAAG,SAAQ,SAAAG,GAAG,OAAE,EAAKqC,eACrBpC,MAEL,EAAKC,SAAW,SAAApD,GAAK,OAAE,EAAKiD,SAAS,CAACH,OAAO9C,KAZ1B,E,iFAenBF,KAAKwF,a,6CAGFxF,KAAK4C,OACP5C,KAAK4C,KAAKiB,IAAI,WACd7D,KAAK4C,KAAKiB,IAAI,Y,+BAGL,IAAD,OACF6B,EAAS,yBAAKtF,UAAU,mBAAmBK,MAAO,CAAC,OAAS,cACjET,KAAKwC,MAAM+C,IAAM,uBACf9E,MAAO,CAACqD,MAAM,QACd6B,YAAU,EAACtF,SAAUL,KAAKsD,SAC1BsC,KAAM,QACT9D,YAAa,4EACb5B,MAAOF,KAAKwC,MAAMQ,aAAU6C,GAC1BpC,OAAOqC,KAAK9F,KAAKwC,MAAM+C,KAAK3F,KAAI,SAAAmG,GAAE,OACjC,kBAAChB,EAAD,CAAQ3D,IAAK2E,GAAK,EAAKvD,MAAM+C,IAAIQ,QAEtB,iNAEXC,EAAOhG,KAAKwC,MAAMQ,OACjB,yBAAK5C,UAAU,iBAAiBK,MAAO,CAAC,OAAS,cAC/C,kBAAC,EAAD,CAAMuC,OAAQhD,KAAKwC,MAAMQ,UAE9B,GACF,OAAO,yBAAK+C,GAAG,OAAM,2BAAK,sBAASf,EAChC,CAACU,EAAOM,U,GA3CMrF,IAAMuD,WCXxB+B,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.b20a9654.chunk.js","sourcesContent":["import React from 'react'\r\nimport types from 'prop-types'\r\nimport {Row, Col, Checkbox, Radio, Collapse, InputNumber, Input} from 'antd'\r\n\r\nexport function FieldBox({children}){\r\n\treturn <Row gutter = {[8,16]}>\r\n\t\t{children.map(ch=>(\r\n\t\t\t<Col span={24}>\r\n\t\t\t    {ch}\r\n\t\t\t</Col>\r\n\t    ))}\r\n\t</Row>\r\n}\r\n\r\nFieldBox.propTypes = {\r\n\tchildren : types.arrayOf(types.node)\r\n}\r\n\r\nexport class Check extends React.PureComponent{\r\n\trender(){\r\n\t\tconst {value,text} = this.props\r\n\t\tconst toChange = e=>this.props.onChange(e.target.checked)\r\n\t\treturn <div className=\"field\"><label>\r\n\t\t  <Checkbox onChange={toChange} checked={value}/>\r\n\t\t  <span style={{marginLeft:'10px'}}>{text}</span>\r\n\t\t</label></div>\r\n\t}\r\n}\r\n\r\nCheck.propTypes = {\r\n\tonChange : types.func.isRequired,\r\n\tvalue : types.bool.isRequired,\r\n\ttext : types.string.isRequired\r\n}\r\n\r\nexport class Container extends React.PureComponent{\r\n\trender(){\r\n\t\tconst {value,text,children} = this.props\r\n\t\treturn <div className=\"container\"> <Collapse activeKey={value?1:[]} bordered={true}>\r\n\t\t  <Collapse.Panel \r\n\t\t      header={<div style={{paddingLeft: '4px'}}>\r\n\t\t\t    <Check onChange={this.props.onChange}{...{value,text}} />\r\n\t\t\t  </div>} \r\n\t\t\t  showArrow={false} \r\n\t\t\t  key={1}\r\n\t\t  >\r\n\t\t\t{children}\r\n\t\t  </Collapse.Panel>\r\n\t\t</Collapse></div>\r\n\t}\r\n}\r\n\r\nContainer.propTypes = {\r\n\tonChange : types.func.isRequired,\r\n\tvalue : types.bool.isRequired,\r\n\ttext : types.string.isRequired,\r\n\tchildren : types.arrayOf(types.node).isRequired\r\n}\r\n\r\nexport class Options extends React.PureComponent{\r\n\trender(){\r\n\t\tconst {value,text,options} = this.props\r\n\t\tconst toChange = e=>this.props.onChange(e.target.value)\r\n\t\treturn <div className=\"field\">\r\n\t\t  <div>{text+':'}</div>\r\n\t      <Radio.Group style={{paddingLeft:'12px'}} onChange={toChange}{...{value}}>\r\n\t\t\t  {options.map(o=>\r\n\t\t\t    <Radio style={{display:'block',lineHeight:'30px'}} value={o.value}>{o.label}</Radio>\r\n\t\t\t  )}\t\t  \r\n\t\t  </Radio.Group>\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nOptions.propTypes = {\r\n\tonChange : types.func.isRequired,\r\n\tvalue : types.any,\r\n\ttext : types.string.isRequired,\r\n\toptions : types.arrayOf(types.object).isRequired\r\n}\r\n\r\nexport class Number extends React.PureComponent{\r\n\trender(){\r\n\t  const {onChange,value,text} = this.props\r\n\t  return <div className=\"field\"><label>  \r\n\t\t  <InputNumber onChange={onChange} value={value} precision={0} placeholder=\"0\" />\r\n\t\t  <span style={{marginTop:'8px', marginLeft:'10px'}}>{text}</span>\r\n\t  </label></div>\r\n\t}\r\n}\r\n\r\nNumber.propTypes = {\r\n\tonChange : types.func.isRequired,\r\n\tvalue : types.number.isRequired,\r\n\ttext : types.string.isRequired,\r\n}\r\n\r\nexport class Decimal extends React.PureComponent{\r\n\trender(){\r\n\t  const {onChange,value,text,dec} = this.props\r\n\t  return <div className=\"field\"><label>\r\n\t      <InputNumber onChange={onChange} value={value} precision={dec} placeholder=\"0.0\"/>\r\n\t\t  <span style={{marginTop:'8px', marginLeft:'10px'}}>{text}</span>\r\n\t\t</label></div>\r\n\t}\r\n}\r\n\r\nDecimal.propTypes = {\r\n\tonChange : types.func.isRequired,\r\n\tvalue : types.number.isRequired,\r\n\ttext : types.string.isRequired,\r\n\tdec : types.number\r\n}\r\n\r\nexport class Text extends React.PureComponent{\r\n\trender(){\r\n      const {value,text} = this.props\r\n\t  const toChange = e=>this.props.onChange(e.target.value)\r\n\t  return <div className=\"field\"><label><div style={{marginBottom: '6px'}}>{text}</div>\r\n\t    <Input.TextArea onChange={toChange} value={value} placeholder=\"...\" \r\n\t\t  maxLength={900} rows={3} /> \r\n\t  </label></div>\r\n\t}\r\n}\r\n\r\nText.propTypes = {\r\n\tonChange : types.func.isRequired,\r\n\tvalue : types.string.isRequired,\r\n\ttext : types.string.isRequired,\r\n}\r\n","import React from 'react'\r\nimport types from 'prop-types'\r\nimport aja from 'aja'\r\n\r\nimport {FieldBox, Check, Container, Options, Number, Decimal, Text} from './formComponents.js'\r\nexport class Form extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\tthis.state = {spec:null,dataArray:{}}\r\n\t\tthis.fetchSpec = function(){\r\n\t\t  this.ajax = (this.ajax || aja())\r\n\t\t   .url(process.env.PUBLIC_URL+'/static/spec/'+this.props.formId+'.json')\r\n\t\t   .on('success',data=>{\r\n\t\t\t   this.setState({dataArray:{}})\r\n\t\t\t   this.setState({spec:data})\r\n\t\t   })\r\n\t\t   .on('error',err=>this.fetchSpec())\r\n\t\t   .go()\r\n\t\t}\t\t\r\n\t\tthis.toChange = pair=>{\r\n\t\t\tconst newData = Object.assign({},this.state.dataArray,pair)\r\n\t\t    this.setState({dataArray:newData})\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.fetchSpec()\t\r\n\t}\r\n\tcomponentDidUpdate(prevProps,prevState){\r\n\t\tif(this.props.formId != prevProps.formId) this.fetchSpec()\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t  if(this.ajax){\r\n\t\tthis.ajax.off(\"success\")\r\n\t\tthis.ajax.off(\"error\")\r\n\t  }\r\n\t}\r\n\trender(){\r\n\t\treturn this.state.spec ? <div className=\"Form\" style={{width:\"100%\",textAlign:\"left\"}}>\r\n\t\t  <FieldBox>\r\n\t\t    {this.state.spec.children.map(f=>\r\n\t\t\t    <Generic onChange={this.toChange} field={f} dataArray={this.state.dataArray}/>  \r\n\t\t\t)}\r\n\t\t  </FieldBox>\r\n\t\t</div>: 'Форма завантажується ...'\r\n\t}\r\n}\r\n\r\nForm.proTypes = {\r\n\tformId : types.string\r\n}\r\n\r\nexport class Generic extends React.Component{\r\n\trender(){\r\n\t\tconst {num,type,dec,data,children} = this.props.field\r\n\t\t\r\n\t\tconst propsToPass = {\r\n\t\t\tonChange : nextValue=>this.props.onChange({[num]:nextValue}),\r\n\t\t\tvalue : this.props.dataArray[num],\r\n\t\t\ttext : data\r\n\t\t}\r\n\t\t\r\n\t\tif(type == 'L' && children.length>0){  \r\n\t\t\treturn <Container {...propsToPass}>\r\n\t\t\t  <FieldBox>\r\n\t\t\t\t{children.map(f=>\r\n\t\t\t\t  <Generic onChange={this.props.onChange} field={f} dataArray={this.props.dataArray}/>\r\n\t\t\t\t)}\r\n\t\t\t  </FieldBox>\r\n\t\t\t</Container>\r\n\t\t}else if(type == 'L'){\r\n\t\t\treturn <Check {...propsToPass}  />\r\n\t\t}else if(type == 'V' && children.length>0){\r\n\t\t\treturn <Options {...propsToPass} options={\r\n\t\t\t\tchildren.map(f=>({label:f.data,value:f.num}))\r\n\t\t\t}/>\r\n\t\t}else if(type == 'N' && dec || type == 'C'){\r\n\t\t\treturn <Decimal {...propsToPass} dec={dec || 10} />\r\n\t\t}else if(type == 'N'){\r\n\t\t\treturn <Number {...propsToPass} />\r\n\t\t}else if(type == 'T'){\r\n\t\t\treturn <Text {...propsToPass} />\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tconsole.dir(this.props.field)\r\n\t\t\tthrow new Error('Problems with your spec, wrong field.')\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\nGeneric.propTypes = {\r\n\tonChange: types.func.isRequired,\r\n\tfield: types.object.isRequired,\r\n\tdataArray: types.object.isRequired\r\n}\r\n\r\n/* function fillEmpty(root){\r\n\tlet result = {}\r\n\tconst dic = {\r\n\t\tN:0,\r\n\t\tL:false,\r\n\t\tV:'',\r\n\t\tT:'',\r\n\t\tC:0\r\n\t}\r\n    function trav(r){\r\n\t\tr.children.forEach(ch=>{\r\n\t\t\tresult[ch.num]=dic[ch.type]\r\n\t\t\ttrav(ch)\r\n\t\t})\r\n\t}\r\n\ttrav(root)\r\n\treturn result\r\n} */","import React from 'react';\nimport aja from 'aja'\n\nimport {Form} from './Form.js'\nimport './App.css';\n\nimport {Select, Row, Col} from 'antd'\nconst {Option} = Select\n\nconst responsive = {\n\txs: {span: 22, offset: 1},\n\tsm: {span: 18, offset: 3},\n\tmd: {span: 16, offset: 4},\n\tlg: {span: 12, offset: 6}\n}\n\nclass App extends React.Component{\n  constructor(props){\n\tsuper(props)\n\tthis.state = {dic:{},formId:''}\n\tthis.fetchDic = function(){\n\t\t  this.ajax = aja()\n\t\t   .url(process.env.PUBLIC_URL+'/static/spec/dic.json')\n\t\t   .on('success',data=>{\n\t\t\t   this.setState({dic:data})\n\t\t   })\n\t\t   .on('error',err=>this.fetchData())\n\t\t   .go()\n\t}\t\t\n\tthis.toChange = value=>this.setState({formId:value})\n  }\n  componentDidMount(){\n\tthis.fetchDic()\t\n  }\n  componentWillUnmount(){\n\tif(this.ajax){\n\t\tthis.ajax.off(\"success\")\n\t\tthis.ajax.off(\"error\")\n\t}\n  }\n  render(){\n    let select = <div className=\"select-container\" style={{\"margin\":\"24px auto\"}}>{\n\t  this.state.dic ? <Select \n\t    style={{width:\"100%\"}}\n\t    showSearch onChange={this.toChange} \n\t    size={\"large\"} \n\t\tplaceholder={\"Оберіть форму\"}\n\t\tvalue={this.state.formId || undefined}>\n\t\t\t{Object.keys(this.state.dic).map(id=>\n\t\t\t  <Option key={id}>{this.state.dic[id]}</Option>\n\t\t\t)}\n    </Select> : 'Завантажується список доступних форм ...'}</div>\n\t\n\tlet form = this.state.formId ?\n      <div className=\"form-container\" style={{\"margin\":\"24px auto\"}}>\n        <Form formId={this.state.formId}/>\n      </div>\n\t: ''\n\treturn <div id=\"App\"><Row><Col {...responsive}>\n\t  {[select,form]}\n\t</Col></Row></div>\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}